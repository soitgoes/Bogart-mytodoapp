(function(a){typeof define==="function"?define(a):typeof exports==="object"?a(require,exports):a(void 0,fw={})})(function(a,h){var e=Object.prototype.hasOwnProperty,i=Array.prototype.forEach,m=Array.prototype.slice,l={},j=function(b,a,c){if(b!=null)if(i&&b.forEach===i)b.forEach(a,c);else if(b.length===+b.length)for(var d=0,h=b.length;d<h;d++){if(d in b&&a.call(c,b[d],d,b)===l)break}else for(d in b)if(e.call(b,d)&&a.call(c,b[d],d,b)===l)break},g=function(b){j(m.call(arguments,1),function(a){for(var c in a)a[c]!==
void 0&&(b[c]=a[c])});return b},d={required:function(b){return b===void 0||b===null?!0:b.length||b!==""},email:function(b){if(b)return b.match(/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i)},ssn:function(b){if(b)return b.match(/\b[0-9]{3}-[0-9]{2}-[0-9]{4}\b/)},date:function(b){if(b)return b.match(/(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)[0-9]{2}/)},iso8601:function(b){if(b)return b.match(/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/)},maxLength:function(b,a,c){if(b)return b.length<=
c.length},minLength:function(b,a,c){if(b)return b.length>=c.length}};h.validateForm=function(b,a){var c={},h=!0,i=g(d,a.validators||{});j(a.fields,function(a,d){var e=a&&a.isVisible&&typeof a.isVisible=="function"&&!a.isVisible(b)?!1:!0,f;a:if(a){f=b[d];for(var g=!a.push?a.validations:a,j=0;j<g.length;j++){var k=g[j];if(k.isValid.test){if(!k.isValid.test(f)){f=k.message||d+" is invalid";break a}}else if(typeof k.isValid=="function"){if(!k.isValid(f,b)){f=k.message||d+" is invalid";break a}}else{var l=
i[k.isValid];if(l)if(l(f,b,k))k.valid&&k.valid();else{k.invalid&&k.invalid();f=k.message||d+" is invalid";break a}else console.log("Validation Function not found: "+k.isValid)}}f=""}else f=!0;g=!e||e&&f==="";h&=g;c[d]={visible:e,error:f,valid:!!g}});j(b,function(d,g){if(a.conventionBased&&d!="")for(var j in i)if(g.indexOf(j)>-1){var l=!!i[j](d,b);c[g]={visible:!0,error:l?"":i[j].message||g+" is invalid",valid:l};h&=l}e.call(c,g)||(c[g]={visible:!0,error:"",valid:!0})});return{fields:c,validForm:!!h}}});
var fieldsEntered={};
(function(a){a.fn.validation=function(){var h=Array.prototype.slice.call(arguments);if(h.length===2&&h[0]==="valid")a(this).data("valid",h[1]);else if(h.length===2&&h[0]==="invalid")a(this).data("invalid",h[1]);else{var e=arguments[0]?jQuery.extend({enableBlur:!0},arguments[0]):{},i=this,h=function(d,b){var f,c,g=e.validationSummary?a(e.validationSummary):a(".validation_summary");g.html("");a("[name]",i).parent().removeClass("invalid");a(".star").remove();for(f in d.fields)if(c=d.fields[f],Object.prototype.hasOwnProperty.call(b,
f)&&c.valid===!1){var h=a("[name='"+f+"']",i);c=h.parent();h.attr("title",d.fields[f].error.replace("*",""));c.addClass("invalid");g.append("<li>"+d.fields[f].error.replace("*","")+"</li>")}},m=function(d){for(var b in d.fields){var f=a("[name='"+b+"']");d.fields[b].visible?(f.parent("p, div, label").show(),f.removeAttr("disabled")):(f.parent("p, div, label").hide(),f.attr("disabled","disabled"))}};if(this[0].tagName!=="FORM")alert("must be a form element");else{e.validators=e.validators||{};e.processErrors=
e.processErrors?e.processErrors:h;e.processVisibility=e.processVisibility?e.processVisibility:m;var l=function(){var d={};a("[name]",i).each(function(b,f){var c=a(this).val(),e=f.name;f.type=="radio"&&a("[name='"+e+"']:checked").length===0&&(c="");f.type=="checkbox"&&(c=a("[name='"+e+"']:checked"),c=c.length===0?"":c.map(function(){return this.value}).toArray());f.type=="select-multiple"&&(c=a("[name='"+e+"'] option:selected"),c=c.length===0?"":c.map(function(){return this.value}).toArray());f.type==
"select-one"&&(c=a("[name='"+e+"'] option:selected"),c=c.length===0?"":c.map(function(){return this.value}).toArray()[0]);d[f.name]=c});return d},j=function(){var a=l();e.before&&e.before(a);a=fw.validateForm(a,e,fieldsEntered);e.processErrors(a,fieldsEntered);e.processVisibility(a);e.after&&e.after(a);return a.validForm};a(this).submit(function(d){fieldsEntered=l();if(!j())return d.preventDefault(),d.stopPropagation(),typeof a(this).data("invalid")==="function"&&a(this).data("invalid")(d),!1;typeof a(this).data("valid")===
"function"&&a(this).data("valid")(d)});if(e.enableBlur){var g=function(){fieldsEntered[this.name]=!0;return j()};a("select[name]",i).change(g);a("select multiple[name]",i).change(g);a("[type='radio'][name]",i).change(g);a("[type='checkbox'][name]",i).click(function(){this.checked?a(this).attr("checked","checked"):a(this).removeAttr("checked");g()});a("[name]",i).blur(g)}fieldsEntered={}}}}})(jQuery);
