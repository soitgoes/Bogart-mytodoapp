<h1 id="view_engine">View Engine</h1>

<p>The Bogart <code>ViewEngine</code> is responsible for rendering templates. It supports partials and layouts. The <code>ViewEngine</code> comes with support for <a href="http://mustache.github.com/">Mustache</a>. It provides plugin capability to support other templating engines.</p>

<h2 id="bogartviewengineengine_viewroot_options">bogart.viewEngine(engine, [viewRoot], [options])</h2>

<ul>
<li>engine <code>String</code> The name of the rendering engine. Defaults to <code>mustache</code>.</li>

<li>viewRoot <code>String</code> Root directory used to resolve templates. Defaults to <code>views</code>.</li>

<li>options <code>ViewEngineOptions</code></li>
</ul>

<h2 id="viewenginerendertemplate_options">viewEngine.render(template, [options])</h2>

<ul>
<li>template <code>String</code> Path to the template. Relative paths are resolved from the root provied to bogart.viewEngine. Defaults to <code>views</code>.</li>
</ul>

<p>The <code>render</code> method uses the selected templating engine to render the specified view with variables from RenderOptions#locals.</p>

<p>Rendering a view with mustache and replacement variables:</p>

<pre><code>var viewEngine = bogart.viewEngine(&#39;mustache&#39;);
viewEngine.render(&#39;index.html&#39;, { locals: { title: &#39;Hello Mustache&#39; } });</code></pre>

<h2 id="viewenginerespondtemplate_options">viewEngine.respond(template, [options])</h2>

<ul>
<li>template <code>String</code> Template to render.</li>

<li>options <code>ViewEngineOptions</code> See class <code>ViewEngineOptions</code>.</li>
</ul>

<p>Returns a promise for a <code>bogart.Response</code>.</p>

<pre><code>var viewEngine = bogart.viewEngine(&#39;mustache&#39;);
var res = viewEngine.respond(&#39;index.html&#39;, { locals: { title: &#39;Hello Mustache&#39; } });</code></pre>

<p>Response would look like this:</p>

<pre><code>{
  status: 200,
  headers: {
    &#39;content-type&#39;: &#39;text/html&#39;
  },
  body: [ &#39;the contents rendered from index.html would be here&#39; ]
}</code></pre>

<h2 id="class_viewengineoptions">Class: ViewEngineOptions</h2>

<ul>
<li>viewEngineOptions.cache <code>Boolean</code> Determines whether views are cached or reloaded from disk when rendered.</li>
</ul>

<p>Options for constructing a <code>ViewEngine</code>.</p>

<h2 id="class_renderoptions">Class: RenderOptions</h2>

<ul>
<li>renderOptions.layout <code>Boolean|String</code> Defaults to <code>layout.html</code>. A <code>String</code> value indicates the layout template to resolve using normal template resolution. A value of <code>false</code> indicates that no layout should be used. A value of <code>true</code> indicates that the default of <code>layout.html</code> should be used.</li>

<li>renderOptions.locals <code>Object|Array</code> Value(s) to be passed to the rendering engine.</li>
</ul>

<h2 id="layouts">Layouts</h2>

<p>Layouts help templates that are applicable to multiople pages.<br />By default, if there is a file named ‘layout.{ext}’ where <code>ext</code> is the extension of the view (haml, jade, mustache, html, etc…) then this file is used as the layout for the view. The layout is given a variable named <code>body</code> that contains the contents of view. The <code>body</code> variable should not be HTML escaped. In Mustache, this means using triple mustache form: <code>}</code>.</p>

<p>Specifying the file extension of a template is optional as long as the file extension matches the default file extension associated with the template type. For example, if using Jade then <code>viewEngine.render(&#39;index&#39;)</code> is equivalent to <code>viewEngine.render(&#39;index.jade&#39;)</code>.</p>

<h3 id="mustache_example">Mustache Example</h3>

<p>View (index.html):</p>

<pre><code>Welcome !</code></pre>

<p>Layout (layout.html):</p>

<pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;&lt;/h1&gt;

    }
  &lt;/body&gt;
&lt;/html&gt;</code></pre>

<p>App (app.js):</p>

<pre><code>var bogart = require(&#39;bogart&#39;);
var viewEngine = bogart.viewEngine(&#39;mustache&#39;);
var router = bogart.router();

router.get(&#39;/hello/:firstName&#39;, function(req) {
  return viewEngine.respond(&#39;index.html&#39;, {
    locals: { title: &#39;Hello&#39;, firstName: req.params.firstName }
  });
});

var app = bogart.app();
app.use(router);
app.start();</code></pre>

<p>Execute <code>node app.js</code> and visit <a href="http://localhost:8080/hello/bogart">http://localhost:8080/hello/bogart</a>.</p>

<h2 id="partials">Partials</h2>

<p>Sometimes, especially with AJAX requests, it is desirable to return a view without rendering it inside of a layout even if a layout is present. To acccomodate this, the View Engine has a <code>partial</code> method. The <code>partial</code> method takes the same arguments as the <code>render</code> method but does not render its template insdie of a layout.</p>

<pre><code>var viewEngine = bogart.viewEngine(&#39;mustache&#39;);
viewEngine.partial(&#39;index.html&#39;);</code></pre>